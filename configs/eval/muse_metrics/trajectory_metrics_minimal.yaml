# @package _global_.eval.metrics.trajectory_metrics_minimal
# Minimal trajectory metrics config - only ROUGE, 5 samples

defaults:
  - ../../data/datasets@datasets: MUSE_forget_knowmem
  - ../../collator@collators: DataCollatorForSupervisedDatasetwithIndex

handler: trajectory_metrics
batch_size: 1  # Minimal batch size for memory efficiency

# Only ROUGE metric
metrics:
  - rouge

trajectory_config:
  logits_source: sampler
  return_logits: true
  return_fixation_steps: true
  sampler_kwargs:
    steps: 16  # Reduced for testing
    temperature: 0.0
    max_new_tokens: 32  # Reduced for testing

datasets:
  MUSE_forget_knowmem:
    args:
      hf_args:
        path: muse-bench/MUSE-News
      predict_with_generate: True
      # Limit to 5 samples
      split: "forget_qa[:5]"

collators:
  DataCollatorForSupervisedDataset:
    args:
      padding_side: left
